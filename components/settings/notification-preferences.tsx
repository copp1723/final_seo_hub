'use client'\nimport { useState } from 'react'\nimport { Switch } from '@/components/ui/switch'\nimport { Label } from '@/components/ui/label'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Separator } from '@/components/ui/separator'\nimport { Mail, Bell, CheckCircle, AlertCircle, Info } from 'lucide-react'\nimport { Alert, AlertDescription } from '@/components/ui/alert'\n\ninterface NotificationPreferences {\n  emailNotifications: boolean\n  requestCreated: boolean\n  statusChanged: boolean\n  taskCompleted: boolean\n  weeklySummary: boolean\n  marketingEmails: boolean\n}\n\ninterface Props {\n  preferences: NotificationPreferences | null\n  onUpdate: (preferences: NotificationPreferences) => void\n  saving: boolean\n}\n\nexport function NotificationPreferencesComponent({ preferences, onUpdate, saving }: Props) {\n  if (!preferences) {\n    return (\n      <div className=\"animate-pulse space-y-4\">\n        <div className=\"h-10 bg-gray-200 rounded\"></div>\n        <div className=\"h-10 bg-gray-200 rounded\"></div>\n      </div>\n    )\n  }\n\n  const updatePreference = (key: keyof NotificationPreferences, value: boolean) => {\n    onUpdate({ ...preferences, [key]: value })\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Master Email Toggle */}\n      <Card className=\"border-2\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-1\">\n              <div className=\"flex items-center gap-2\">\n                <Mail className=\"h-5 w-5 text-blue-600\" />\n                <Label htmlFor=\"email-notifications\" className=\"text-base font-semibold\">\n                  Email Notifications\n                </Label>\n              </div>\n              <p className=\"text-sm text-muted-foreground\">\n                Master control for all email notifications\n              </p>\n            </div>\n            <Switch\n              id=\"email-notifications\"\n              checked={preferences.emailNotifications}\n              onCheckedChange={(checked) => updatePreference('emailNotifications', checked)}\n              className=\"data-[state=checked]:bg-blue-600\"\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Content Notifications Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Bell className=\"h-5 w-5\" />\n            Content Notifications\n            <Badge variant=\"secondary\" className=\"ml-2\">New Feature</Badge>\n          </CardTitle>\n          <CardDescription>\n            Get notified when new content is added to your website\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <Alert>\n            <Info className=\"h-4 w-4\" />\n            <AlertDescription>\n              These notifications show you exactly what SEO work is being done on your behalf, \n              including new pages, blog posts, and Google Business Profile posts.\n            </AlertDescription>\n          </Alert>\n          \n          <div className=\"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200\">\n            <div className=\"space-y-1\">\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-blue-600\" />\n                <Label htmlFor=\"task-completed\" className=\"font-medium\">\n                  Content Creation Notifications\n                </Label>\n              </div>\n              <p className=\"text-sm text-blue-700\">\n                Get beautiful emails when pages, blogs, or GBP posts are added\n              </p>\n              <div className=\"flex gap-2 mt-2\">\n                <Badge variant=\"outline\" className=\"text-xs\">üìÑ Pages</Badge>\n                <Badge variant=\"outline\" className=\"text-xs\">üìù Blogs</Badge>\n                <Badge variant=\"outline\" className=\"text-xs\">üè¢ GBP Posts</Badge>\n              </div>\n            </div>\n            <Switch\n              id=\"task-completed\"\n              checked={preferences.taskCompleted && preferences.emailNotifications}\n              onCheckedChange={(checked) => updatePreference('taskCompleted', checked)}\n              disabled={!preferences.emailNotifications}\n              className=\"data-[state=checked]:bg-blue-600\"\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Other Notifications */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Other Notifications</CardTitle>\n          <CardDescription>\n            Control other types of email notifications\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label htmlFor=\"request-created\">Request Created</Label>\n              <p className=\"text-sm text-muted-foreground\">\n                Get notified when new SEO requests are created\n              </p>\n            </div>\n            <Switch\n              id=\"request-created\"\n              checked={preferences.requestCreated && preferences.emailNotifications}\n              onCheckedChange={(checked) => updatePreference('requestCreated', checked)}\n              disabled={!preferences.emailNotifications}\n            />\n          </div>\n          \n          <Separator />\n          \n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label htmlFor=\"status-changed\">Status Updates</Label>\n              <p className=\"text-sm text-muted-foreground\">\n                Get notified when request status changes\n              </p>\n            </div>\n            <Switch\n              id=\"status-changed\"\n              checked={preferences.statusChanged && preferences.emailNotifications}\n              onCheckedChange={(checked) => updatePreference('statusChanged', checked)}\n              disabled={!preferences.emailNotifications}\n            />\n          </div>\n          \n          <Separator />\n          \n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label htmlFor=\"weekly-summary\">Weekly Summary</Label>\n              <p className=\"text-sm text-muted-foreground\">\n                Receive weekly progress reports\n              </p>\n            </div>\n            <Switch\n              id=\"weekly-summary\"\n              checked={preferences.weeklySummary && preferences.emailNotifications}\n              onCheckedChange={(checked) => updatePreference('weeklySummary', checked)}\n              disabled={!preferences.emailNotifications}\n            />\n          </div>\n          \n          <Separator />\n          \n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label htmlFor=\"marketing-emails\">Marketing Communications</Label>\n              <p className=\"text-sm text-muted-foreground\">\n                Receive product updates and announcements\n              </p>\n            </div>\n            <Switch\n              id=\"marketing-emails\"\n              checked={preferences.marketingEmails && preferences.emailNotifications}\n              onCheckedChange={(checked) => updatePreference('marketingEmails', checked)}\n              disabled={!preferences.emailNotifications}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Preview Section */}\n      <Card className=\"border-green-200 bg-green-50\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2 text-green-800\">\n            <CheckCircle className=\"h-5 w-5\" />\n            Preview Content Notifications\n          </CardTitle>\n          <CardDescription className=\"text-green-700\">\n            See what your content notifications will look like\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex gap-3\">\n            <Button \n              variant=\"outline\" \n              size=\"sm\"\n              onClick={() => window.open('/api/email/preview/content?type=page', '_blank')}\n              className=\"border-green-300 text-green-700 hover:bg-green-100\"\n            >\n              üìÑ Page Preview\n            </Button>\n            <Button \n              variant=\"outline\" \n              size=\"sm\"\n              onClick={() => window.open('/api/email/preview/content?type=blog', '_blank')}\n              className=\"border-green-300 text-green-700 hover:bg-green-100\"\n            >\n              üìù Blog Preview\n            </Button>\n            <Button \n              variant=\"outline\" \n              size=\"sm\"\n              onClick={() => window.open('/api/email/preview/content?type=gbp_post', '_blank')}\n              className=\"border-green-300 text-green-700 hover:bg-green-100\"\n            >\n              üè¢ GBP Preview\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {!preferences.emailNotifications && (\n        <Alert>\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>\n            Email notifications are disabled. Enable the master toggle above to receive notifications.\n          </AlertDescription>\n        </Alert>\n      )}\n    </div>\n  )\n}